#
# Apache Druid cluster-wide configuration derived from the official quickstart.
# Tuned for laptop development with minimal resource requirements.
#

druid.extensions.loadList=["druid-hdfs-storage", "druid-kafka-indexing-service", "druid-datasketches", "druid-multi-stage-query", "postgresql-metadata-storage"]

# Log all runtime properties on startup
# (disable if you prefer to keep property values out of logs).
druid.startup.logging.logProperties=true

# ZooKeeper coordinates service discovery across the cluster.
druid.zk.service.host=zookeeper
druid.zk.paths.base=/druid

# Metadata storage backed by Postgres for multi-service deployments.
druid.metadata.storage.type=postgresql
druid.metadata.storage.connector.connectURI=jdbc:postgresql://metadata-storage:5432/druid
druid.metadata.storage.connector.user=druid
druid.metadata.storage.connector.password=druid

# Deep storage lives on the shared local disk inside each container (bind mounted in docker compose).
druid.storage.type=local
druid.storage.storageDirectory=var/druid/segments

# Indexer task logs reside alongside deep storage segments.
druid.indexer.logs.type=file
druid.indexer.logs.directory=var/druid/indexing-logs

# Service discovery configuration for indexing and coordination daemons.
druid.selectors.indexing.serviceName=druid/overlord
druid.selectors.coordinator.serviceName=druid/coordinator

# Basic monitoring and emitters suitable for local development.
druid.monitoring.monitors=["org.apache.druid.java.util.metrics.JvmMonitor", "org.apache.druid.server.metrics.ServiceStatusMonitor"]
druid.emitter=noop
druid.emitter.logging.logLevel=info

# Store 64-bit floating point values without down-casting.
druid.indexing.doubleStorage=double

# Hide sensitive properties when serving APIs.
druid.server.hiddenProperties=["druid.s3.accessKey","druid.s3.secretKey","druid.metadata.storage.connector.password", "password", "key", "token", "pwd"]

# Enable SQL planner features used in the quickstarts.
druid.sql.enable=true
druid.sql.planner.useGroupingSetForExactDistinct=true

# Misc defaults carried over from the upstream quickstart.
druid.lookup.enableLookupSyncOnStartup=false
druid.expressions.useStrictBooleans=true
